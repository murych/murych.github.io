---
title: "[qt] Проблемы с отображением данных в QCustomPlot"
categories: qt
---

Опять нытьё?
Опять нытьё!

Нужно сделать примитивную программу для построения графика по данным, приходящим с [датчика](https://murych.github.io/cool-day/).
C# не знаю, поэтому выбрал C++ и Qt, для построения графиков -- QCustomPlot.
Нафигачил интерфейс, работу с последовательным портом, все красиво.
И столкнулся с неожиданным явлением.

Каждый раз, как в порт приходит новая строка данных, с ней проводится некоторое количество манипуляций, чтобы из `QByteArray` с разделительными символами и прочим мусором привести в `QVector` чисел.
Затем исходная строка выплёвывается в "консоль", а массив чисел -- в график.

Но по каким-то причинам график не хочет строиться, если приложение запускать само по себе:

<div class="embed"><iframe src="https://webmshare.com/play/Lxen0" frameborder="0" allowfullscreen></iframe></div>

Однако, если приложение запустить в отладчике, повесить на функцию обработки значений брейкпоинт и ручками щелкать опрос порта, то все работает идеально (данные пока случайные):

<div class="embed"><iframe src="https://webmshare.com/play/Ry93d" frameborder="0" allowfullscreen></iframe></div>

Heresy.
